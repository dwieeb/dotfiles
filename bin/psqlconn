#!/usr/bin/env python

import time
import argparse
import subprocess

parser = argparse.ArgumentParser(
    description="Parse a PostgreSQL connection string and use `psql` to "
                "connect. All other arguments are passed directly to `psql`.")
parser.add_argument('connstring', help="The PostgreSQL connection string.")

args = parser.parse_args()

first, second = args.connstring.split('@')
username, password = first[11:].split(':')
host, db = second.split('/')
host, port = host.split(':')


print(password)
subprocess.call(['psql', '-h', host, '-d', db, '-p', port, '-U', username])
